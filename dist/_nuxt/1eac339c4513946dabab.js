(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{478:function(e,t,o){},479:function(e,t,o){"use strict";o(35),o(90),o(34);var r=o(5),n=o(55),l=o(7),c={props:["config"],data:function(){return{qiniu_url:"",configuration:{isShowList:!1,multiple:!1,limit:null,btnText:"上传",isPrompt:"",errorText:"请上传PNG、JPG、PDF、WORD、EXCEL格式的文件!",accept:".jpg, .jpeg, .png, .pdf, .excel, .docx,.psd,.PSD, .JPG, .JPEG, PNG, .PDF, .EXCEL, .DOCX"},postData:{token:"",name:"",key:""},tokenParams:{bucket:"ukec",path:"upload/user",ext:""},fileList:[]}},mounted:function(){this.configuration=this.config,this.qiniu_url=l.a.qiniu_url},methods:{beforUpload:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return r=t,e.size/1024/1024<30||r.$message({message:"请上传大小不能超过30MB的文件!",type:"warning"}),r.tokenParams.ext=e.name.split(".")[1],r.postData.name=e.name,o.next=7,r.uploadToken();case 7:case"end":return o.stop()}}),o)})))()},uploadToken:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e,t.next=3,n.a.get("/qiniu/token",e.tokenParams).then((function(e){o.postData.token=e.token,o.postData.key=e.key}));case 3:case"end":return t.stop()}}),t)})))()},handleRemove:function(e,t){this.flieBox=t,this.$emit("uploadFile",t)},handleExceed:function(e,t){this.$message.warning("当前限制选择"+this.configuration.limit+"个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},uploadError:function(){this.$message.error(this.configuration.errorText)},successUpload:function(e,t,o){this.flieBox=o,this.$emit("uploadFile",o),"false"!=this.configuration.isPrompt&&this.$message({message:"上传成功！",type:"success"})}}},m=(o(480),o(10)),component=Object(m.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"upload"},[o("el-upload",{staticClass:"upload-demo",attrs:{action:e.qiniu_url,data:e.postData,"before-upload":e.beforUpload,"on-success":e.successUpload,"on-remove":e.handleRemove,"show-file-list":e.configuration.isShowList,limit:e.configuration.limit,multiple:e.configuration.multiple,"on-exceed":e.handleExceed,"file-list":e.fileList,"on-error":e.uploadError,accept:e.configuration.accept}},[e._v(e._s(e.configuration.btnText))])],1)}),[],!1,null,"331b40b8",null);t.a=component.exports},480:function(e,t,o){"use strict";var r=o(478);o.n(r).a},481:function(e,t,o){"use strict";var r=o(89),n=o(4),l={props:["type"],components:{UploadBtn:o(479).a},data:function(){return{postUrl:"",titleMaxLength:500,dialogVisible:!1,configuration:{isShowList:!0,multiple:!0,limit:5,btnText:"上传",errorText:"请上传PNG、JPG、PDF、WORD、EXCEL格式的文件!",accept:".jpg, .jpeg, .png, .pdf,.doc,.xls,.JPG, .JPEG, PNG, .PDF,.DOC,.XLS"},flieBox:[],postData:{token:"",name:"",key:""},tokenParams:{bucket:"ukec",path:"upload/user",ext:""},fileList:[],select:{noteType:[]},modify:{note_type:"",note_body:"",note_files:[],page_type:""},rules:{note_type:[{required:!0,message:"请选择你的修改类别",trigger:"blur"}],note_body:[{required:!0,message:"请填写你的备注",trigger:"blur"}],note_files:[{required:!0,message:"请上传你的附件",trigger:"blur"}]}}},mounted:function(){var e=this;switch(e.type){case"cv":case"CV":e.modify.page_type="cv";break;case"ps":case"个人陈述":e.modify.page_type="ps";break;case"letter":case"推荐信":e.modify.page_type="res";break;default:e.modify.page_type="cv"}var t=Object(n.e)("noteType");t?(e.select.noteType=t.NOTE_TYPE_CV,e.modify.note_type=t.NOTE_TYPE_CV[0].id):r.a.get("/code-val/group-key-list").then((function(t){e.select.noteType=t.NOTE_TYPE_CV,e.modify.note_type=t.NOTE_TYPE_CV[0].id,Object(n.k)("noteType",t)}))},computed:{isShow:function(){var e=!1,t="";return this.select.noteType.map((function(e){"内容"==e.cvalue_cn&&(t=e.id)})),this.modify.note_type==t&&(e=!e),e}},methods:{addFile:function(e){this.flieBox=e,console.log(e,"文件监听")},handleClose:function(e){this.cancel("modify")},cancel:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1,this.fileList=[],this.flieBox=[]},submitForm:function(e){var t=this;0==t.flieBox.length?t.modify.note_files=[]:(t.modify.note_files=[],t.flieBox.map((function(e){t.modify.note_files.push({name:e.response.data.filename,url:e.response.data.key})}))),t.$refs[e].validate((function(o){o&&r.a.post("/customer-note/add",t.modify).then((function(o){var r=t.$message({message:"提交成功！",type:"success"});setTimeout((function(){r.close(),t.cancel(e)}),1e3)}))}))}}},c=o(10),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modify modify_upload"},[o("span",{staticClass:"cv_button modify_button",on:{click:function(t){e.dialogVisible=!0}}},[e._v("修改")]),e._v(" "),o("div",{staticClass:"add add_note"},[o("el-dialog",{attrs:{title:"",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",{staticClass:"add_title"},[e._v("修改")]),e._v(" "),o("div",{staticClass:"add_content"},[o("el-form",{ref:"modify",attrs:{model:e.modify,"status-icon":"",rules:e.rules,"label-width":"300px","label-position":"top"}},[o("el-form-item",{attrs:{label:"类别:",prop:"note_type"}},[o("el-select",{staticClass:"widthAll",attrs:{placeholder:"类别"},model:{value:e.modify.note_type,callback:function(t){e.$set(e.modify,"note_type",t)},expression:"modify.note_type"}},e._l(e.select.noteType,(function(e,t){return o("el-option",{key:t,attrs:{label:e.cvalue_cn,value:e.id}})})),1)],1),e._v(" "),e.isShow?o("el-form-item",{staticClass:"modfityTip",attrs:{label:"  "}},[o("span",[e._v("内容修改只可进行1次，修改件的返还时间为72小时")])]):e._e(),e._v(" "),o("el-form-item",{staticClass:"cvTextareaBox modifyText",attrs:{label:"备注:",prop:"note_body"}},[o("el-input",{staticClass:"noteTextarea",attrs:{type:"textarea",autocomplete:"off"},model:{value:e.modify.note_body,callback:function(t){e.$set(e.modify,"note_body",t)},expression:"modify.note_body"}})],1),e._v(" "),o("el-form-item",{staticClass:"upload_lang",attrs:{label:"附件:",prop:"note_files"}},[o("upload-btn",e._g({attrs:{config:e.configuration}},{uploadFile:e.addFile}))],1)],1),e._v(" "),o("div",{staticClass:"footer_button"},[o("span",{on:{click:function(t){return e.cancel("modify")}}},[o("i",[e._v("取消")])]),e._v(" "),o("span",{on:{click:function(t){return e.submitForm("modify")}}},[e._v("提交")])])],1)])],1)])}),[],!1,null,null,null);t.a=component.exports},482:function(e,t,o){"use strict";o.d(t,"a",(function(){return c})),o.d(t,"b",(function(){return m})),o.d(t,"c",(function(){return d}));var r=/^1[345789]\d{9}$/,n=/^\w+@\w+(?:\.\w+)+$/,l=/[a-z0-9]{6,16}/,c=function(e,t,o){t?l.test(t)?o():o(new Error("请输入6-16位字母和数字组合的密码")):o(new Error("请输入密码"))},m=function(e,t,o){t?n.test(t)?o():o(new Error("请输入正确的电子邮箱格式")):o(new Error("请输入邮箱号码"))},d=function(e,t,o){t?r.test(t)?o():o(new Error("请输入正确的手机号码")):o(new Error("请输入手机号码"))}},507:function(e,t,o){},551:function(e,t,o){"use strict";var r=o(507);o.n(r).a},588:function(e,t,o){"use strict";o.r(t);var r=o(482),n=(o(4),o(89)),l={transition:"",layout:"refactor",components:{InfoModify:o(481).a},data:function(){return{modifyType:"cv",userForm:{},cvForm1:{customer_name:"",sex:"",birthday:"",phone:"",email:"",apply_email:"",now_address:""},rules:{customer_name:[{required:!0,message:"请输入您的姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择您的性别",trigger:"blur"}],birthday:[{required:!0,message:"请输入您的生日",trigger:"blur"}],phone:[{required:!0,validator:r.c,trigger:"blur"}],email:[{required:!0,validator:r.b,trigger:"blur"}],apply_email:[{required:!0,validator:r.b,trigger:"blur"}],now_address:[{required:!0,message:"请输入您的地址",trigger:"blur"}]}}},mounted:function(){var e=this;n.a.get("/customer/get-info").then((function(t){t&&(e.userForm=t,0!=t.sex&&t.sex?e.cvForm1.sex=t.sex+"":e.cvForm1.sex="",e.cvForm1.customer_name=t.customer_name,e.cvForm1.birthday=t.birthday,e.cvForm1.phone=t.phone,e.cvForm1.email=t.email,e.cvForm1.apply_email=t.apply_email,e.cvForm1.now_address=t.now_address)}))},filters:{textFormat:function(e){return void 0!==e&&(""!=e&&!(!e&&void 0!==e&&0!=e))}},methods:{submitForm:function(e){var t=this;t.$refs[e].validate((function(e){e&&(t.cvForm1.phone+="",n.a.post("/customer/edit",t.cvForm1).then((function(e){t.$store.commit("user/SET_USER",t.cvForm1);var o=t.$message({message:"提交成功",type:"success"});setTimeout((function(){o.close(),t.$router.push("/writ/cv/step2")}),1e3)})))}))}}},c=(o(551),o(10)),component=Object(c.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"cv_step1"},[e._m(0),e._v(" "),o("div",{staticClass:"cv_content cv1"},[o("el-form",{ref:"cvForm1",attrs:{model:e.cvForm1,"status-icon":"",rules:e.rules,"label-width":"300px","label-position":"top"}},[o("el-form-item",{attrs:{label:"姓名",prop:"customer_name"}},[o("el-input",{attrs:{placeholder:"请输入您的姓名",autocomplete:"off",readonly:e._f("textFormat")(e.userForm.customer_name)},model:{value:e.cvForm1.customer_name,callback:function(t){e.$set(e.cvForm1,"customer_name",t)},expression:"cvForm1.customer_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"性别",prop:"sex",readonly:""}},[o("el-select",{staticClass:"widthAll",attrs:{placeholder:"请选择您的性别"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.cvForm1.sex,callback:function(t){e.$set(e.cvForm1,"sex",t)},expression:"cvForm1.sex"}},[o("el-option",{attrs:{value:"4",label:"男",disabled:e._f("textFormat")(e.userForm.sex)}}),e._v(" "),o("el-option",{attrs:{value:"5",label:"女",disabled:e._f("textFormat")(e.userForm.sex)}})],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[o("el-date-picker",{staticClass:"widthAll",attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"请输入您的生日",readonly:e._f("textFormat")(e.userForm.birthday)},model:{value:e.cvForm1.birthday,callback:function(t){e.$set(e.cvForm1,"birthday",t)},expression:"cvForm1.birthday"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"手机",prop:"phone"}},[o("el-input",{attrs:{placeholder:"请输入您的手机",autocomplete:"off",readonly:e._f("textFormat")(e.userForm.phone)},model:{value:e.cvForm1.phone,callback:function(t){e.$set(e.cvForm1,"phone",e._n(t))},expression:"cvForm1.phone"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[o("el-input",{attrs:{placeholder:"请输入您的邮箱",autocomplete:"off",readonly:e._f("textFormat")(e.userForm.email)},model:{value:e.cvForm1.email,callback:function(t){e.$set(e.cvForm1,"email",t)},expression:"cvForm1.email"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"申请专用邮箱",prop:"apply_email"}},[o("el-input",{attrs:{placeholder:"请输入您的申请专用邮箱",autocomplete:"off",readonly:e._f("textFormat")(e.userForm.apply_email)},model:{value:e.cvForm1.apply_email,callback:function(t){e.$set(e.cvForm1,"apply_email",t)},expression:"cvForm1.apply_email"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"地址",prop:"now_address"}},[o("el-input",{attrs:{placeholder:"请输入您的地址",autocomplete:"off",readonly:e._f("textFormat")(e.userForm.now_address)},model:{value:e.cvForm1.now_address,callback:function(t){e.$set(e.cvForm1,"now_address",t)},expression:"cvForm1.now_address"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"cv_footer"},[o("div",{staticClass:"footer_button"},[o("span",{on:{click:function(t){return e.submitForm("cvForm1")}}},[e._v("下一步")])]),e._v(" "),o("span",{staticClass:"next"},[e._v("请在退出前点击“下一步”按钮，您当前填写的信息可以被保存。")])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title_box"},[t("div",{staticClass:"cv_title"},[t("p",[this._v("基本信息")]),this._v(" "),t("span",[this._v("请认真填写您空缺的资料，保存后不能修改，如需修改请联系您的顾问老师进行修改")])])])}],!1,null,null,null);t.default=component.exports}}]);