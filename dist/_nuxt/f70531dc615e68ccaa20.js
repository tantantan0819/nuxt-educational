(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{522:function(t,e,o){},567:function(t,e,o){"use strict";var n=o(522);o.n(n).a},602:function(t,e,o){"use strict";o.r(e);var n,l=o(89),c=o(7),r=o(4),d={layout:"refactor",data:function(){return{isDetail:!1,tableData:[],select:{noteType:[]},modify:{note_type:"",note_body:"",files:[],time:""}}},beforeCreate:function(){n=this},mounted:function(){this.getType()},computed:{isShow:function(){var t=!1,e="";return this.select.noteType.map((function(t){"内容"==t.cvalue_cn&&(e=t.id)})),this.modify.note_type==e&&(t=!t),t}},filters:{typeFormat2:function(t){return n.modify.note_type!=t},timeFormat2:function(t){return Object(r.m)(t)}},methods:{getType:function(){var t=this,e=Object(r.e)("noteType");e?(t.select.noteType=e.NOTE_TYPE_CV,t.modify.type=e.NOTE_TYPE_CV[0].id,l.a.post("/customer-note/list").then((function(e){t.tableData=e.rows}))):l.a.get("/code-val/group-key-list").then((function(e){t.select.noteType=e.NOTE_TYPE_CV,t.modify.type=e.NOTE_TYPE_CV[0].id,l.a.post("/customer-note/list").then((function(e){t.tableData=e.rows})),Object(r.k)("noteType",e)}))},typeFormat:function(t,e){var o="";return this.select.noteType.length>0&&this.select.noteType.map((function(e){e.id==t.note_type&&(o=e.cvalue_cn)})),o},noteFormat:function(t){var e="cv";switch(t.page_type){case"cv":e="CV";break;case"ps":e="PS";break;case"res":e="推荐信";break;default:e="CV"}return e},timeFormat:function(t,e){return Object(r.m)(t.create_time)},cancel:function(t){this.isDetail=!1},handleEdit:function(t,e){this.modify=e,this.isDetail=!0,this.modify.note_files=JSON.parse(this.modify.note_files)},close:function(){this.psDetail=!1},view:function(t){window.open(c.a.view_host+t,"_blank")}}},f=(o(567),o(10)),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"cv con"},[o("div",{staticClass:"cv_step2"},[t._m(0),t._v(" "),o("div",{staticClass:"refactor_table auto_table"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[o("el-table-column",{attrs:{prop:"page_type",label:"材料类型",formatter:t.noteFormat,width:"150"}}),t._v(" "),o("el-table-column",{attrs:{prop:"note_type",label:"修改类别",formatter:t.typeFormat,width:"150"}}),t._v(" "),o("el-table-column",{attrs:{prop:"note_body",label:"备注"}}),t._v(" "),o("el-table-column",{attrs:{prop:"create_time",label:"提交时间",formatter:t.timeFormat,width:"200"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticClass:"table_btn",attrs:{size:"mini"},on:{click:function(o){return t.handleEdit(e.$index,e.row)}}},[t._v("查看详情")])]}}])})],1)],1),t._v(" "),o("div",{staticClass:"add_note"},[o("el-dialog",{attrs:{title:"",visible:t.isDetail,width:"1377"},on:{"update:visible":function(e){t.isDetail=e}}},[o("div",{staticClass:"add_title"},[t._v("修改详情")]),t._v(" "),o("div",{staticClass:"add_con plan_add_plan sign_add_con modify"},[o("el-form",{ref:"modify",attrs:{model:t.modify,"status-icon":"","label-width":"320px","label-position":"top"}},[o("el-form-item",{attrs:{label:"类别:",prop:"type"}},[o("el-select",{staticClass:"widthAll",attrs:{placeholder:"类别"},model:{value:t.modify.note_type,callback:function(e){t.$set(t.modify,"note_type",e)},expression:"modify.note_type"}},t._l(t.select.noteType,(function(e,n){return o("el-option",{key:n,attrs:{label:e.cvalue_cn,value:e.id,disabled:t._f("typeFormat2")(e.id)}})})),1)],1),t._v(" "),t.isShow?o("el-form-item",{staticClass:"modfityTip",attrs:{label:"  "}},[o("span",[t._v("内容修改只可进行1次，修改件的返还时间为72小时")])]):t._e(),t._v(" "),o("el-form-item",{staticClass:"cvTextareaBox modifyText",attrs:{label:"备注:",prop:"note_body"}},[o("el-input",{staticClass:"noteTextarea",attrs:{type:"textarea",autocomplete:"off",readonly:""},model:{value:t.modify.note_body,callback:function(e){t.$set(t.modify,"note_body",e)},expression:"modify.note_body"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"附件:",prop:"files"}},t._l(t.modify.note_files,(function(e,n){return o("div",{key:n,staticClass:"note_item"},[o("span",[o("i",{staticClass:"el-icon-document"}),t._v("\n                  "+t._s(e.name)+"\n                ")]),t._v(" "),o("span",{staticClass:"note_view el-icon-view",on:{click:function(o){return t.view(e.url)}}})])})),0),t._v(" "),o("el-form-item",{staticClass:"modify_itme",attrs:{label:"提交时间:"}},[o("span",[t._v(t._s(t._f("timeFormat2")(t.modify.create_time)))])])],1),t._v(" "),o("div",{staticClass:"add_footer"},[o("span",{on:{click:function(e){return t.cancel("modify")}}},[t._v("关闭")])])],1)])],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"version_title"},[e("span",[this._v("修改记录")])])}],!1,null,null,null);e.default=component.exports}}]);