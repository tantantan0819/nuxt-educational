(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{478:function(t,e,n){},479:function(t,e,n){"use strict";n(24),n(90),n(35);var o=n(5),r=n(55),l=n(7),c={props:["config"],data:function(){return{qiniu_url:"",configuration:{isShowList:!1,multiple:!1,limit:null,btnText:"上传",isPrompt:"",errorText:"请上传PNG、JPG、PDF、WORD、EXCEL格式的文件!",accept:".jpg, .jpeg, .png, .pdf, .excel, .docx,.psd,.PSD, .JPG, .JPEG, PNG, .PDF, .EXCEL, .DOCX"},postData:{token:"",name:"",key:""},tokenParams:{bucket:"ukec",path:"upload/user",ext:""},fileList:[]}},mounted:function(){this.configuration=this.config,this.qiniu_url=l.a.qiniu_url},methods:{beforUpload:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e,t.size/1024/1024<30||o.$message({message:"请上传大小不能超过30MB的文件!",type:"warning"}),o.tokenParams.ext=t.name.split(".")[1],o.postData.name=t.name,n.next=7,o.uploadToken();case 7:case"end":return n.stop()}}),n)})))()},uploadToken:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,r.a.get("/qiniu/token",t.tokenParams).then((function(t){n.postData.token=t.token,n.postData.key=t.key}));case 3:case"end":return e.stop()}}),e)})))()},handleRemove:function(t,e){this.flieBox=e,this.$emit("uploadFile",e)},handleExceed:function(t,e){this.$message.warning("当前限制选择"+this.configuration.limit+"个文件，本次选择了 ".concat(t.length," 个文件，共选择了 ").concat(t.length+e.length," 个文件"))},uploadError:function(){this.$message.error(this.configuration.errorText)},successUpload:function(t,e,n){this.flieBox=n,this.$emit("uploadFile",n),"false"!=this.configuration.isPrompt&&this.$message({message:"上传成功！",type:"success"})}}},d=(n(480),n(10)),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload"},[n("el-upload",{staticClass:"upload-demo",attrs:{action:t.qiniu_url,data:t.postData,"before-upload":t.beforUpload,"on-success":t.successUpload,"on-remove":t.handleRemove,"show-file-list":t.configuration.isShowList,limit:t.configuration.limit,multiple:t.configuration.multiple,"on-exceed":t.handleExceed,"file-list":t.fileList,"on-error":t.uploadError,accept:t.configuration.accept}},[t._v(t._s(t.configuration.btnText))])],1)}),[],!1,null,"331b40b8",null);e.a=component.exports},480:function(t,e,n){"use strict";var o=n(478);n.n(o).a},481:function(t,e,n){"use strict";var o=n(71),r=n(4),l={props:["type"],components:{UploadBtn:n(479).a},data:function(){return{postUrl:"",titleMaxLength:500,dialogVisible:!1,configuration:{isShowList:!0,multiple:!0,limit:5,btnText:"上传",errorText:"请上传PNG、JPG、PDF、WORD、EXCEL格式的文件!",accept:".jpg, .jpeg, .png, .pdf,.doc,.xls,.JPG, .JPEG, PNG, .PDF,.DOC,.XLS"},flieBox:[],postData:{token:"",name:"",key:""},tokenParams:{bucket:"ukec",path:"upload/user",ext:""},fileList:[],select:{noteType:[]},modify:{note_type:"",note_body:"",note_files:[],page_type:""},rules:{note_type:[{required:!0,message:"请选择你的修改类别",trigger:"blur"}],note_body:[{required:!0,message:"请填写你的备注",trigger:"blur"}],note_files:[{required:!0,message:"请上传你的附件",trigger:"blur"}]}}},mounted:function(){var t=this;switch(t.type){case"cv":case"CV":t.modify.page_type="cv";break;case"ps":case"个人陈述":t.modify.page_type="ps";break;case"letter":case"推荐信":t.modify.page_type="res";break;default:t.modify.page_type="cv"}var e=Object(r.e)("noteType");e?(t.select.noteType=e.NOTE_TYPE_CV,t.modify.note_type=e.NOTE_TYPE_CV[0].id):o.a.get("/code-val/group-key-list").then((function(e){t.select.noteType=e.NOTE_TYPE_CV,t.modify.note_type=e.NOTE_TYPE_CV[0].id,Object(r.k)("noteType",e)}))},computed:{isShow:function(){var t=!1,e="";return this.select.noteType.map((function(t){"内容"==t.cvalue_cn&&(e=t.id)})),this.modify.note_type==e&&(t=!t),t}},methods:{addFile:function(t){this.flieBox=t,console.log(t,"文件监听")},handleClose:function(t){this.cancel("modify")},cancel:function(t){this.$refs[t].resetFields(),this.dialogVisible=!1,this.fileList=[],this.flieBox=[]},submitForm:function(t){var e=this;0==e.flieBox.length?e.modify.note_files=[]:(e.modify.note_files=[],e.flieBox.map((function(t){e.modify.note_files.push({name:t.response.data.filename,url:t.response.data.key})}))),e.$refs[t].validate((function(n){n&&o.a.post("/customer-note/add",e.modify).then((function(n){var o=e.$message({message:"提交成功！",type:"success"});setTimeout((function(){o.close(),e.cancel(t)}),1e3)}))}))}}},c=n(10),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modify modify_upload"},[n("span",{staticClass:"cv_button modify_button",on:{click:function(e){t.dialogVisible=!0}}},[t._v("修改")]),t._v(" "),n("div",{staticClass:"add add_note"},[n("el-dialog",{attrs:{title:"",visible:t.dialogVisible,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",{staticClass:"add_title"},[t._v("修改")]),t._v(" "),n("div",{staticClass:"add_content"},[n("el-form",{ref:"modify",attrs:{model:t.modify,"status-icon":"",rules:t.rules,"label-width":"300px","label-position":"top"}},[n("el-form-item",{attrs:{label:"类别:",prop:"note_type"}},[n("el-select",{staticClass:"widthAll",attrs:{placeholder:"类别"},model:{value:t.modify.note_type,callback:function(e){t.$set(t.modify,"note_type",e)},expression:"modify.note_type"}},t._l(t.select.noteType,(function(t,e){return n("el-option",{key:e,attrs:{label:t.cvalue_cn,value:t.id}})})),1)],1),t._v(" "),t.isShow?n("el-form-item",{staticClass:"modfityTip",attrs:{label:"  "}},[n("span",[t._v("内容修改只可进行1次，修改件的返还时间为72小时")])]):t._e(),t._v(" "),n("el-form-item",{staticClass:"cvTextareaBox modifyText",attrs:{label:"备注:",prop:"note_body"}},[n("el-input",{staticClass:"noteTextarea",attrs:{type:"textarea",autocomplete:"off"},model:{value:t.modify.note_body,callback:function(e){t.$set(t.modify,"note_body",e)},expression:"modify.note_body"}})],1),t._v(" "),n("el-form-item",{staticClass:"upload_lang",attrs:{label:"附件:",prop:"note_files"}},[n("upload-btn",t._g({attrs:{config:t.configuration}},{uploadFile:t.addFile}))],1)],1),t._v(" "),n("div",{staticClass:"footer_button"},[n("span",{on:{click:function(e){return t.cancel("modify")}}},[n("i",[t._v("取消")])]),t._v(" "),n("span",{on:{click:function(e){return t.submitForm("modify")}}},[t._v("提交")])])],1)])],1)])}),[],!1,null,null,null);e.a=component.exports},482:function(t,e,n){var o=n(16),r=n(57),l=n(25),c=n(483),d="["+c+"]",m=RegExp("^"+d+d+"*"),f=RegExp(d+d+"*$"),_=function(t,e,n){var r={},d=l((function(){return!!c[t]()||"​"!="​"[t]()})),m=r[t]=d?e(v):c[t];n&&(r[n]=m),o(o.P+o.F*d,"String",r)},v=_.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(m,"")),2&e&&(t=t.replace(f,"")),t};t.exports=_},483:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},485:function(t,e,n){"use strict";var o=n(11),r=n(43),l=n(56),c=n(271),d=n(126),m=n(25),f=n(91).f,_=n(127).f,v=n(23).f,h=n(482).trim,y=o.Number,C=y,F=y.prototype,x="Number"==l(n(178)(F)),w="trim"in String.prototype,k=function(t){var e=d(t,!1);if("string"==typeof e&&e.length>2){var n,o,r,l=(e=w?e.trim():h(e,3)).charCodeAt(0);if(43===l||45===l){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===l){switch(e.charCodeAt(1)){case 66:case 98:o=2,r=49;break;case 79:case 111:o=8,r=55;break;default:return+e}for(var code,c=e.slice(2),i=0,m=c.length;i<m;i++)if((code=c.charCodeAt(i))<48||code>r)return NaN;return parseInt(c,o)}}return+e};if(!y(" 0o1")||!y("0b1")||y("+0x1")){y=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof y&&(x?m((function(){F.valueOf.call(n)})):"Number"!=l(n))?c(new C(k(e)),n,y):k(e)};for(var E,T=n(17)?f(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;T.length>S;S++)r(C,E=T[S])&&!r(y,E)&&v(y,E,_(C,E));y.prototype=F,F.constructor=y,n(26)(o,"Number",y)}},486:function(t,e,n){},516:function(t,e,n){},517:function(t,e,n){var o=n(16),r=n(518);o(o.S+o.F*(Number.parseInt!=r),"Number",{parseInt:r})},518:function(t,e,n){var o=n(11).parseInt,r=n(482).trim,l=n(483),c=/^[-+]?0[xX]/;t.exports=8!==o(l+"08")||22!==o(l+"0x16")?function(t,e){var n=r(String(t),3);return o(n,e>>>0||(c.test(n)?16:10))}:o},519:function(t,e,n){},520:function(t,e,n){"use strict";var o=n(486);n.n(o).a},521:function(t,e,n){},534:function(t,e,n){"use strict";var o={props:["tabel"],data:function(){return{addShow:!0}},methods:{closeDialog:function(){this.$emit("closeContr","false")}}},r=(n(520),n(10)),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"modify fileList"},[n("div",{staticClass:"add add_note"},[n("el-dialog",{attrs:{title:"",visible:t.addShow},on:{"update:visible":function(e){t.addShow=e},close:t.closeDialog}},[n("div",{staticClass:"add_title"},[t._v("文件列表")]),t._v(" "),n("div",{staticClass:"add_content"},[n("div",{staticClass:"add_note modify_upload mul_upload"},[n("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{stripe:"",data:t.tabel,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{prop:"name",label:"文件名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"file_url",label:"文件路径"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:e.row.file_url,target:"_blank"}},[t._v(t._s(e.row.file_url))])]}}])})],1)],1)])])],1)])}),[],!1,null,null,null);e.a=component.exports},564:function(t,e,n){"use strict";var o=n(516);n.n(o).a},565:function(t,e,n){"use strict";var o=n(519);n.n(o).a},566:function(t,e,n){"use strict";var o=n(521);n.n(o).a},580:function(t,e,n){"use strict";n.r(e);n(35);var o=n(5),r=n(71),l=n(7),c=n(4),d=n(481),m=n(479),f={props:["single","id"],components:{UploadBtn:m.a},data:function(){return{addShow:!0,isClose:!1,configuration:{isShowList:!1,multiple:!1,limit:null,btnText:"上传",errorText:"",accept:""},addForm:{origin_name:"",material_name:"",file_url:"",material_id:"",is_private:"1"},addRules:{material_name:[{required:!0,message:"请填写您的材料名称",trigger:"blur"}],origin_name:[{required:!0,message:"请上传您的材料文件",trigger:"blur"}]}}},methods:{addFile:function(t){t&&(this.addForm.file_url=t[t.length-1].response.data.url,this.addForm.origin_name=t[t.length-1].response.data.filename)},cancelAdd:function(t){this.$refs[t].resetFields(),this.addShow=!1,this.$emit("closeContr","false")},closeDialog:function(){this.$emit("closeContr","false")},addSubmit:function(t){var e=this;e.$refs[t].validate((function(n){n&&(e.addForm.material_id=e.id,r.a.post("/customer-material/add",e.addForm).then((function(n){var o=e.$message({message:"提交成功！",type:"success"});setTimeout((function(){o.close(),e.$refs[t].resetFields(),e.addShow=!1,e.$emit("closeContr","true")}),1e3)})))}))}}},_=(n(564),n(10)),v=Object(_.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add_note"},[n("el-dialog",{attrs:{visible:t.addShow,width:"717px",center:""},on:{"update:visible":function(e){t.addShow=e},close:t.closeDialog}},[n("div",{staticClass:"add_title"},[t._v("增加")]),t._v(" "),n("div",{staticClass:"add_con"},[n("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addRules}},[n("el-form-item",{attrs:{prop:"material_name",label:"材料名称"}},[n("el-input",{attrs:{placeholder:"请填写您的材料名称"},model:{value:t.addForm.material_name,callback:function(e){t.$set(t.addForm,"material_name",e)},expression:"addForm.material_name"}})],1),t._v(" "),n("el-form-item",{staticClass:"upload_lang",attrs:{prop:"origin_name",label:"文件"}},[n("el-input",{attrs:{readonly:"",placeholder:"请上传您的材料文件"},model:{value:t.addForm.origin_name,callback:function(e){t.$set(t.addForm,"origin_name",e)},expression:"addForm.origin_name"}}),t._v(" "),n("upload-btn",t._g({staticClass:"unload_btn",attrs:{config:t.configuration}},{uploadFile:t.addFile}))],1)],1),t._v(" "),n("div",{staticClass:"add_footer"},[n("span",{on:{click:function(e){return t.cancelAdd("addForm")}}},[t._v("取消")]),t._v(" "),n("span",{on:{click:function(e){return t.addSubmit("addForm")}}},[t._v("确定")])])],1)])],1)}),[],!1,null,null,null).exports,h=(n(485),n(517),{props:["id","num"],components:{UploadBtn:m.a},data:function(){return{addShow:!0,isClose:!1,configuration:{isShowList:!0,multiple:!0,limit:5,btnText:"上传",errorText:"",accept:""},addForm:{origin_name:[],material_name:"",file_url:[],material_id:"",is_private:"1"},addRules:{material_name:[{required:!0,message:"请填写您的材料名称",trigger:"blur"}],origin_name:[{required:!0,message:"请上传您的材料文件",trigger:"blur"}]}}},mounted:function(){this.configuration.limit=Number.parseInt(this.num)},methods:{addFile:function(t){var e=this;e.addForm.origin_name=[],e.addForm.file_url=[],t.map((function(t){t.response&&(e.addForm.origin_name.push(t.response.data.filename),e.addForm.file_url.push(t.response.data.url))}))},cancelAdd:function(t){this.$refs[t].resetFields(),this.addShow=!1,this.$emit("closeContr","false")},closeDialog:function(){this.$emit("closeContr","false")},addSubmit:function(t){var e=this;e.$refs[t].validate((function(n){n&&(e.addForm.material_id=e.id,r.a.post("/customer-material/add",e.addForm).then((function(n){var o=e.$message({message:"提交成功！",type:"success"});setTimeout((function(){o.close(),e.$refs[t].resetFields(),e.addShow=!1,e.$emit("closeContr","true")}),1e3)})))}))}}}),y=(n(565),Object(_.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"add_note modify_upload mul_upload"},[n("el-dialog",{attrs:{visible:t.addShow,width:"717px",center:""},on:{"update:visible":function(e){t.addShow=e},close:t.closeDialog}},[n("div",{staticClass:"add_title"},[t._v("增加---")]),t._v(" "),n("div",{staticClass:"add_con"},[n("el-form",{ref:"addForm",attrs:{model:t.addForm,rules:t.addRules}},[n("el-form-item",{attrs:{prop:"material_name",label:"材料名称"}},[n("el-input",{attrs:{placeholder:"请填写您的材料名称"},model:{value:t.addForm.material_name,callback:function(e){t.$set(t.addForm,"material_name",e)},expression:"addForm.material_name"}})],1),t._v(" "),n("el-form-item",{staticClass:"upload_lang",attrs:{prop:"origin_name",label:"文件"}},[n("upload-btn",t._g({attrs:{config:t.configuration}},{uploadFile:t.addFile}))],1)],1),t._v(" "),n("div",{staticClass:"add_footer"},[n("span",{on:{click:function(e){return t.cancelAdd("addForm")}}},[t._v("取消")]),t._v(" "),n("span",{on:{click:function(e){return t.addSubmit("addForm")}}},[t._v("确定")])])],1)])],1)}),[],!1,null,null,null).exports),C=n(534),F={name:"new",components:{InfoModify:d.a,AddMaterial:v,MulMaterial:y,FileList:C.a},data:function(){return{isList:!1,material_id:"",meterial_num:"",single:!1,multiple:!1,img_url:"",cid:"",material:[],listData:[]}},filters:{timeFormat:function(t){return Object(c.m)(t)}},mounted:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t).img_url=l.a.view_host,e.next=4,r.a.get("/customer/get-info");case 4:o=e.sent,n.cid=o.id,n.getMaterial();case 7:case"end":return e.stop()}}),e)})))()},methods:{getMaterial:function(){var t=this;r.a.get("/customer-material/list-by-type",{cid:t.cid}).then((function(e){e&&(t.material=e)}))},isAdd:function(t,e){this.material_id=t,this.meterial_num=e,e>1?this.multiple=!0:this.single=!0},closeSingle:function(t){this.single=!1,"true"==t&&this.getMaterial()},closeMultiple:function(t){this.multiple=!1,"true"==t&&this.getMaterial()},download:function(t,e){window.open(l.a.view_host+t+"?attname="+e,"_self")},showList:function(data){this.listData=data,this.isList=!0},closeList:function(){this.isList=!1}}},x=(n(566),Object(_.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"visa_table materia_table"},[t.material?n("div",{staticClass:"visa_box"},[t._m(0),t._v(" "),n("div",{staticClass:"visa_con"},t._l(t.material,(function(e,o){return n("div",{key:o,staticClass:"visa_item"},[n("div",{staticClass:"visa_left"},[t._v(t._s(e.materialname_cn))]),t._v(" "),n("div",{staticClass:"visa_con",class:{active:e.lists.length>1}},t._l(e.lists,(function(o,r){return n("div",{key:r,staticClass:"visa_center"},[n("span",[t._v(t._s(o.material_name))]),t._v(" "),n("span",[e.allow_file_num<2||o.file_url_data.length<2?n("a",{attrs:{href:o.file_url,target:"_blank"}},[t._v(t._s(o.origin_name))]):n("i",{staticClass:"showList",on:{click:function(e){return t.showList(o.file_url_data)}}},[t._v("文件列表")])]),t._v(" "),n("span",[t._v(t._s(t._f("timeFormat")(o.create_time)))]),t._v(" "),n("span",[t._v(t._s(o.创建人))]),t._v(" "),199==o.material_status?n("span",{class:{blue:199==o.material_status}},[n("i",[t._v("审核未通过")])]):0==o.material_status?n("span",{class:{red:0==o.material_status}},[n("i",[t._v("审核中")])]):n("span",{class:{green:200==o.material_status}},[n("i",[t._v("审核通过")])])])})),0),t._v(" "),n("div",{staticClass:"visa_right materia_right"},[1==e.is_multi||e.lists.length<1?n("span",{staticClass:"meteria_add",on:{click:function(n){return t.isAdd(e.material_id,e.allow_file_num)}}},[t._v("新增")]):n("span",{staticClass:"meteria_add",on:{click:function(e){return t.download(t.item2.file_url,t.item2.origin_name)}}},[t._v("下载")]),t._v(" "),"CV"==e.materialname_cn||"个人陈述"==e.materialname_cn||"推荐信"==e.materialname_cn?n("div",{staticClass:"material_view"},[n("info-modify",{attrs:{type:e.materialname_cn}})],1):t._e()])])})),0)]):t._e(),t._v(" "),t.single?n("add-material",t._g({attrs:{id:t.material_id}},{closeContr:t.closeSingle})):t._e(),t._v(" "),t.multiple?n("mul-material",t._g({attrs:{id:t.material_id,num:t.meterial_num}},{closeContr:t.closeMultiple})):t._e(),t._v(" "),t.isList?n("file-list",t._g({attrs:{tabel:t.listData}},{closeContr:t.closeList})):t._e()],1)}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"visa_item visa_top"},[n("div",{staticClass:"visa_left"},[t._v("类型")]),t._v(" "),n("div",{staticClass:"visa_con"},[n("div",{staticClass:"visa_center"},[n("span",[t._v("材料名称")]),t._v(" "),n("span",[t._v("文件")]),t._v(" "),n("span",[t._v("上传时间")]),t._v(" "),n("span",[t._v("上传人")]),t._v(" "),n("span",[t._v("审核状态")])])]),t._v(" "),n("div",{staticClass:"visa_right materia_right"},[t._v("操作")])])}],!1,null,null,null));e.default=x.exports}}]);