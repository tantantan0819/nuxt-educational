(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{478:function(e,t,o){},479:function(e,t,o){"use strict";o(35),o(90),o(34);var n=o(5),l=o(55),r=o(7),c={props:["config"],data:function(){return{qiniu_url:"",configuration:{isShowList:!1,multiple:!1,limit:null,btnText:"上传",isPrompt:"",errorText:"请上传PNG、JPG、PDF、WORD、EXCEL格式的文件!",accept:".jpg, .jpeg, .png, .pdf, .excel, .docx,.psd,.PSD, .JPG, .JPEG, PNG, .PDF, .EXCEL, .DOCX"},postData:{token:"",name:"",key:""},tokenParams:{bucket:"ukec",path:"upload/user",ext:""},fileList:[]}},mounted:function(){this.configuration=this.config,this.qiniu_url=r.a.qiniu_url},methods:{beforUpload:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function o(){var n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return n=t,e.size/1024/1024<30||n.$message({message:"请上传大小不能超过30MB的文件!",type:"warning"}),n.tokenParams.ext=e.name.split(".")[1],n.postData.name=e.name,o.next=7,n.uploadToken();case 7:case"end":return o.stop()}}),o)})))()},uploadToken:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=e,t.next=3,l.a.get("/qiniu/token",e.tokenParams).then((function(e){o.postData.token=e.token,o.postData.key=e.key}));case 3:case"end":return t.stop()}}),t)})))()},handleRemove:function(e,t){this.flieBox=t,this.$emit("uploadFile",t)},handleExceed:function(e,t){this.$message.warning("当前限制选择"+this.configuration.limit+"个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},uploadError:function(){this.$message.error(this.configuration.errorText)},successUpload:function(e,t,o){this.flieBox=o,this.$emit("uploadFile",o),"false"!=this.configuration.isPrompt&&this.$message({message:"上传成功！",type:"success"})}}},d=(o(480),o(10)),component=Object(d.a)(c,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"upload"},[o("el-upload",{staticClass:"upload-demo",attrs:{action:e.qiniu_url,data:e.postData,"before-upload":e.beforUpload,"on-success":e.successUpload,"on-remove":e.handleRemove,"show-file-list":e.configuration.isShowList,limit:e.configuration.limit,multiple:e.configuration.multiple,"on-exceed":e.handleExceed,"file-list":e.fileList,"on-error":e.uploadError,accept:e.configuration.accept}},[e._v(e._s(e.configuration.btnText))])],1)}),[],!1,null,"331b40b8",null);t.a=component.exports},480:function(e,t,o){"use strict";var n=o(478);o.n(n).a},481:function(e,t,o){"use strict";var n=o(89),l=o(4),r={props:["type"],components:{UploadBtn:o(479).a},data:function(){return{postUrl:"",titleMaxLength:500,dialogVisible:!1,configuration:{isShowList:!0,multiple:!0,limit:5,btnText:"上传",errorText:"请上传PNG、JPG、PDF、WORD、EXCEL格式的文件!",accept:".jpg, .jpeg, .png, .pdf,.doc,.xls,.JPG, .JPEG, PNG, .PDF,.DOC,.XLS"},flieBox:[],postData:{token:"",name:"",key:""},tokenParams:{bucket:"ukec",path:"upload/user",ext:""},fileList:[],select:{noteType:[]},modify:{note_type:"",note_body:"",note_files:[],page_type:""},rules:{note_type:[{required:!0,message:"请选择你的修改类别",trigger:"blur"}],note_body:[{required:!0,message:"请填写你的备注",trigger:"blur"}],note_files:[{required:!0,message:"请上传你的附件",trigger:"blur"}]}}},mounted:function(){var e=this;switch(e.type){case"cv":case"CV":e.modify.page_type="cv";break;case"ps":case"个人陈述":e.modify.page_type="ps";break;case"letter":case"推荐信":e.modify.page_type="res";break;default:e.modify.page_type="cv"}var t=Object(l.e)("noteType");t?(e.select.noteType=t.NOTE_TYPE_CV,e.modify.note_type=t.NOTE_TYPE_CV[0].id):n.a.get("/code-val/group-key-list").then((function(t){e.select.noteType=t.NOTE_TYPE_CV,e.modify.note_type=t.NOTE_TYPE_CV[0].id,Object(l.k)("noteType",t)}))},computed:{isShow:function(){var e=!1,t="";return this.select.noteType.map((function(e){"内容"==e.cvalue_cn&&(t=e.id)})),this.modify.note_type==t&&(e=!e),e}},methods:{addFile:function(e){this.flieBox=e,console.log(e,"文件监听")},handleClose:function(e){this.cancel("modify")},cancel:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1,this.fileList=[],this.flieBox=[]},submitForm:function(e){var t=this;0==t.flieBox.length?t.modify.note_files=[]:(t.modify.note_files=[],t.flieBox.map((function(e){t.modify.note_files.push({name:e.response.data.filename,url:e.response.data.key})}))),t.$refs[e].validate((function(o){o&&n.a.post("/customer-note/add",t.modify).then((function(o){var n=t.$message({message:"提交成功！",type:"success"});setTimeout((function(){n.close(),t.cancel(e)}),1e3)}))}))}}},c=o(10),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"modify modify_upload"},[o("span",{staticClass:"cv_button modify_button",on:{click:function(t){e.dialogVisible=!0}}},[e._v("修改")]),e._v(" "),o("div",{staticClass:"add add_note"},[o("el-dialog",{attrs:{title:"",visible:e.dialogVisible,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[o("div",{staticClass:"add_title"},[e._v("修改")]),e._v(" "),o("div",{staticClass:"add_content"},[o("el-form",{ref:"modify",attrs:{model:e.modify,"status-icon":"",rules:e.rules,"label-width":"300px","label-position":"top"}},[o("el-form-item",{attrs:{label:"类别:",prop:"note_type"}},[o("el-select",{staticClass:"widthAll",attrs:{placeholder:"类别"},model:{value:e.modify.note_type,callback:function(t){e.$set(e.modify,"note_type",t)},expression:"modify.note_type"}},e._l(e.select.noteType,(function(e,t){return o("el-option",{key:t,attrs:{label:e.cvalue_cn,value:e.id}})})),1)],1),e._v(" "),e.isShow?o("el-form-item",{staticClass:"modfityTip",attrs:{label:"  "}},[o("span",[e._v("内容修改只可进行1次，修改件的返还时间为72小时")])]):e._e(),e._v(" "),o("el-form-item",{staticClass:"cvTextareaBox modifyText",attrs:{label:"备注:",prop:"note_body"}},[o("el-input",{staticClass:"noteTextarea",attrs:{type:"textarea",autocomplete:"off"},model:{value:e.modify.note_body,callback:function(t){e.$set(e.modify,"note_body",t)},expression:"modify.note_body"}})],1),e._v(" "),o("el-form-item",{staticClass:"upload_lang",attrs:{label:"附件:",prop:"note_files"}},[o("upload-btn",e._g({attrs:{config:e.configuration}},{uploadFile:e.addFile}))],1)],1),e._v(" "),o("div",{staticClass:"footer_button"},[o("span",{on:{click:function(t){return e.cancel("modify")}}},[o("i",[e._v("取消")])]),e._v(" "),o("span",{on:{click:function(t){return e.submitForm("modify")}}},[e._v("提交")])])],1)])],1)])}),[],!1,null,null,null);t.a=component.exports},483:function(e,t,o){"use strict";var n=o(11),l=o(43),r=o(56),c=o(271),d=o(126),f=o(24),m=o(91).f,h=o(127).f,v=o(23).f,_=o(484).trim,y=n.Number,k=y,x=y.prototype,C="Number"==r(o(178)(x)),F="trim"in String.prototype,E=function(e){var t=d(e,!1);if("string"==typeof t&&t.length>2){var o,n,l,r=(t=F?t.trim():_(t,3)).charCodeAt(0);if(43===r||45===r){if(88===(o=t.charCodeAt(2))||120===o)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:n=2,l=49;break;case 79:case 111:n=8,l=55;break;default:return+t}for(var code,c=t.slice(2),i=0,f=c.length;i<f;i++)if((code=c.charCodeAt(i))<48||code>l)return NaN;return parseInt(c,n)}}return+t};if(!y(" 0o1")||!y("0b1")||y("+0x1")){y=function(e){var t=arguments.length<1?0:e,o=this;return o instanceof y&&(C?f((function(){x.valueOf.call(o)})):"Number"!=r(o))?c(new k(E(t)),o,y):E(t)};for(var T,w=o(17)?m(k):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)l(k,T=w[S])&&!l(y,T)&&v(y,T,h(k,T));y.prototype=x,x.constructor=y,o(25)(n,"Number",y)}},484:function(e,t,o){var n=o(16),l=o(57),r=o(24),c=o(485),d="["+c+"]",f=RegExp("^"+d+d+"*"),m=RegExp(d+d+"*$"),h=function(e,t,o){var l={},d=r((function(){return!!c[e]()||"​"!="​"[e]()})),f=l[e]=d?t(v):c[e];o&&(l[o]=f),n(n.P+n.F*d,"String",l)},v=h.trim=function(e,t){return e=String(l(e)),1&t&&(e=e.replace(f,"")),2&t&&(e=e.replace(m,"")),e};e.exports=h},485:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},508:function(e,t,o){},552:function(e,t,o){"use strict";var n=o(508);o.n(n).a},589:function(e,t,o){"use strict";o.r(t);o(483),o(273);var n=o(89),l=o(4),r={transition:"",layout:"refactor",components:{InfoModify:o(481).a},data:function(){return{modifyType:"cv",outerVisible:!1,innerVisible:!1,state:"",selectSchool:"",search:"",searchCon:"",schoolTable:[],schoolTotal:0,nowSchool:1,pageSize:10,isHidden:!0,select:{school:[],major:[],record:[],state:[]},tableData:[],cvForm2:{school_name:"",admission_date:"",graduaction_date:"",school_id:"",qualification:"",average_result:"",majorname_cn:""},rules:{admission_date:[{required:!0,message:"请输入您的入学时间",trigger:"blur"}],graduaction_date:[{required:!0,message:"请输入您的毕业时间",trigger:"blur"}],school_id:[{required:!0,message:"请输入您的毕业/就读院校",trigger:"blur"}],school_name:[{required:!0,message:"请输入您的毕业/就读院校",trigger:"blur"}],majorname_cn:[{required:!0,message:"请输入您的毕业/就读专业",trigger:"blur"}],qualification:[{required:!0,message:"请选择您的学历",trigger:"blur"}],average_result:[{required:!0,message:"请输入您的平均成绩",trigger:"blur"}]}}},mounted:function(){var e=this;e.getEdu(),e.schoolData();var t=Object(l.e)("schoolList");t?e.select.school=t:n.a.get("/school-local/list").then((function(t){e.select.school=t.list,Object(l.k)("schoolList",t.list)})),n.a.get("/code-val/group-key-list").then((function(t){e.select.record=t.CURRENT_DEGREE})),n.a.get("/major-local/list").then((function(t){e.select.major=t.list,Object(l.k)("majorList",t.list)}));var o=Object(l.e)("stateList");o?e.select.state=o:n.a.get("/school-local/country",{showALL:0}).then((function(t){e.select.state=t,Object(l.k)("stateList",t)}))},methods:{prev:function(){this.$router.push("/writ/cv/step1")},next:function(){this.$router.push("/writ/cv/step3")},cancel:function(e){this.$refs[e].resetFields(),this.outerVisible=!1},closeSchool:function(){this.innerVisible=!1},getEdu:function(){var e=this;n.a.get("/customer-education/get-my-list").then((function(t){e.tableData=t}))},changeState:function(e){this.state=e,this.schoolData()},schoolData:function(){var e=this;n.a.get("/school-local/list?page="+e.nowSchool+"&pageSize="+e.pageSize+"&search[country]="+e.state+"&search[school_name]="+e.search).then((function(t){t&&(e.schoolTotal=Number(t.count),e.schoolTable=t.list)}))},handleCurrentChange:function(e){this.nowSchool=e,this.schoolData()},handleEdit:function(e){this.cvForm2.school_id=this.schoolTable[e].id,this.selectSchool=this.schoolTable[e].id,this.cvForm2.school_name=this.schoolTable[e].school_name,this.$refs.cvForm2.validateField("school_name"),this.search="",this.innerVisible=!1},searchSchool:function(){this.nowSchool=1,this.searchCon=this.search,this.schoolData()},submitForm:function(e){var t=this;t.cvForm2.qualification=t.cvForm2.qualification+"",t.$refs[e].validate((function(o){o&&n.a.post("/customer-education/add",t.cvForm2).then((function(o){var n=t.$message({message:"提交成功！",type:"success"});setTimeout((function(){n.close(),t.$refs[e].resetFields(),t.outerVisible=!1,t.getEdu()}),1e3)}))}))}}},c=(o(552),o(10)),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"cv_step2"},[o("div",{staticClass:"title_box"},[e._m(0),e._v(" "),o("div",{staticClass:"modify_wrap"},[o("span",{staticClass:"cv_button",on:{click:function(t){e.outerVisible=!0}}},[e._v("新增教育背景")])])]),e._v(" "),o("div",{staticClass:"cv_content cv2 centerTable"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"74"}}),e._v(" "),o("el-table-column",{attrs:{prop:"admission_date",label:"入学时间",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"graduaction_date",label:"毕业时间",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"school_name",label:"毕业/就读院校"}}),e._v(" "),o("el-table-column",{attrs:{prop:"majorname_cn",label:"毕业/就读专业"}}),e._v(" "),o("el-table-column",{attrs:{prop:"qualification_name",label:"学历",width:"160"}}),e._v(" "),o("el-table-column",{attrs:{prop:"average_result",label:"平均成绩",width:"130"}})],1)],1),e._v(" "),o("div",{staticClass:"cv_footer"},[o("div",{staticClass:"footer_button"},[o("span",{on:{click:e.prev}},[o("i",[e._v("上一步")])]),e._v(" "),o("span",{on:{click:e.next}},[e._v("下一步")])]),e._v(" "),o("span",{staticClass:"next"},[e._v("请在退出前点击“下一步”按钮，您当前填写的信息可以被保存。")])]),e._v(" "),o("div",{staticClass:"add add_note"},[o("el-dialog",{staticClass:"school_dialog add",attrs:{title:"",visible:e.outerVisible},on:{"update:visible":function(t){e.outerVisible=t}}},[o("div",{staticClass:"add_title"},[e._v("添加教育背景")]),e._v(" "),o("div",{staticClass:"add_content"},[o("el-form",{ref:"cvForm2",attrs:{model:e.cvForm2,"status-icon":"",rules:e.rules,"label-width":"300px","label-position":"top"}},[o("el-form-item",{attrs:{label:"入学时间",prop:"admission_date"}},[o("el-date-picker",{staticClass:"widthAll",attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"请输入您的入学时间"},model:{value:e.cvForm2.admission_date,callback:function(t){e.$set(e.cvForm2,"admission_date",t)},expression:"cvForm2.admission_date"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"毕业时间",prop:"graduaction_date"}},[o("el-date-picker",{staticClass:"widthAll",attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"请输入您的毕业时间"},model:{value:e.cvForm2.graduaction_date,callback:function(t){e.$set(e.cvForm2,"graduaction_date",t)},expression:"cvForm2.graduaction_date"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"毕业/就读院校",prop:"school_name"}},[o("el-input",{attrs:{placeholder:"请选择您的毕业/就读院校",autocomplete:"off",readonly:""},on:{focus:function(t){e.innerVisible=!0}},model:{value:e.cvForm2.school_name,callback:function(t){e.$set(e.cvForm2,"school_name",t)},expression:"cvForm2.school_name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"毕业/就读专业",prop:"majorname_cn"}},[o("el-input",{attrs:{placeholder:"请输入您的毕业/就读专业",autocomplete:"off"},model:{value:e.cvForm2.majorname_cn,callback:function(t){e.$set(e.cvForm2,"majorname_cn",t)},expression:"cvForm2.majorname_cn"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"学历",prop:"qualification"}},[o("el-select",{staticClass:"widthAll",attrs:{placeholder:"请选择您的学历"},model:{value:e.cvForm2.qualification,callback:function(t){e.$set(e.cvForm2,"qualification",t)},expression:"cvForm2.qualification"}},e._l(e.select.record,(function(e,t){return o("el-option",{key:t,attrs:{label:e.cvalue_cn,value:e.id}})})),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"平均成绩",prop:"average_result"}},[o("el-input",{attrs:{placeholder:"请输入您的平均成绩",autocomplete:"off"},model:{value:e.cvForm2.average_result,callback:function(t){e.$set(e.cvForm2,"average_result",t)},expression:"cvForm2.average_result"}})],1)],1),e._v(" "),o("div",{staticClass:"footer_button"},[o("span",{on:{click:function(t){return e.cancel("cvForm2")}}},[o("i",[e._v("取消")])]),e._v(" "),o("span",{on:{click:function(t){return e.submitForm("cvForm2")}}},[e._v("保存")])])],1),e._v(" "),o("div",{staticClass:"add_note"},[o("el-dialog",{staticClass:"add_note",attrs:{width:"650px",title:"",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t}}},[o("div",{staticClass:"add_title"},[e._v("学校列表")]),e._v(" "),o("div",{staticClass:"add_content school_content"},[o("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入搜索的学校名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchSchool(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[o("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},on:{change:e.changeState},slot:"prepend",model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},[o("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.select.state,(function(e,t){return o("el-option",{key:t,attrs:{label:e.country,value:e.country}})}))],2),e._v(" "),o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchSchool},slot:"append"})],1),e._v(" "),o("div",{staticClass:"school_table"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.schoolTable,stripe:""}},[o("el-table-column",{attrs:{prop:"",label:"选择",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-radio",{staticClass:"schoolRadio",attrs:{label:e.schoolTable[t.$index].id},on:{change:function(o){return e.handleEdit(t.$index)}},model:{value:e.selectSchool,callback:function(t){e.selectSchool=t},expression:"selectSchool"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"school_name",label:"学校名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"country",label:"所在地",width:"150"}})],1),e._v(" "),o("el-pagination",{attrs:{"hide-on-single-page":e.isHidden,layout:"total,prev, pager, next",total:e.schoolTotal},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),o("div",{staticClass:"footer_button"},[o("span",{on:{click:e.closeSchool}},[e._v("确定")])])],1)])],1)])],1)])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"cv_title"},[t("p",[this._v("教育背景")]),this._v(" "),t("span",[this._v("请认真填写您空缺的资料，保存后不能修改，如需修改请联系您的顾问老师进行修改")])])}],!1,null,null,null);t.default=component.exports}}]);